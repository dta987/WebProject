create user yamaman_db identified by oracle account unlock;

grant connect, resource to yamaman_db;

--2016/07/19 수정 성진


//////테이블 생성/////////////

create table members(
	user_id varchar2(15) primary key,
	user_password varchar2(15),
	user_name varchar2(20),
	user_email varchar2(30),
	user_nickname varchar2(20) UNIQUE,
	user_img varchar2(50),
	sign_date date default sysdate,
	user_title varchar2(1000)
);

create table boards(
	board_no number primary key,	
	board_category number,
	board_title varchar2(30),
	board_writer varchar2(15),
	board_writ_date date default sysdate,
	board_update date default sysdate,
	board_content varchar2(500),
	board_img varchar2(1000),
	board_readhit number default 0,
	user_nickname varchar2(20),
	group_no number default 0,
	order_no number default 0,
	depth number default 0,
	constraint board_writer_fk 
	foreign key(board_writer) references members(user_id) 
	on delete set null
);

create table Mountains(
	mountain_no number primary key,
	mountain_name varchar2(30),
	mountain_area varchar2(20),
	mountain_address varchar2(60),
	mountain_img varchar2(1000),
	mountain_introduce varchar2(500),
	mountain_thema number
);

create table mountains_history(
	history_no number,
	user_id varchar2(15),
	mountain_no number,
	hiking_date date,
	constraint history_user_id_fk
	foreign key(user_id) references members(user_id) 
	on delete set null,
	constraint history_mountain_no_fk
	foreign key(mountain_no) references mountains(mountain_no) 
	on delete set null
);

create table title(
	title_no number primary key,
	title_name varchar(30),
	title_condition varchar(60),
	title_img varchar(50)
);


/////// 시쿼스 생성 ////////

--mountain_no
create sequence mountain_no_seq start with 1 increment by 1 nocache;

--board_no
create sequence board_no_seq start with 1 increment by 1 nocache;

--history_no
create sequence history_no_seq start with 1 increment by 1 nocache;

--title_no
create sequence title_no_seq start with 1 increment by 1 nocache;

--user_title_no
create sequence user_title_no_seq start with 1 increment by 1 nocache;








